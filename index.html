<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Stream Timer</title>
</head>
<body>

<h1>Stream Timer</h1>

<button id="authBtn">Авторизоваться через DonationAlerts</button>

<script>
    const CLIENT_ID = "17497";
    const REDIRECT_URI = "https://bogdan15600-star.github.io/stream-timer/";

    // Кнопка авторизации
    document.getElementById("authBtn").addEventListener("click", () => {
        const authUrl = `https://www.donationalerts.com/oauth/authorize?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&response_type=token&scope=oauth-donation-index`;
        window.location.href = authUrl;
    });

    // Проверяем, есть ли токен в URL
    if (window.location.hash.includes("access_token")) {
        const params = new URLSearchParams(window.location.hash.substring(1));
        const accessToken = params.get("access_token");

        console.log("Токен получен:", accessToken);

        // Можно сохранить токен
        localStorage.setItem("donation_token", accessToken);

        alert("Авторизация успешна!");
    }
</script>

</body>
</html>
